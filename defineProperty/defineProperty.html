<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DefineProperty</title>
</head>
<body>
    <div id="app"></div>
</body>
<script>
    //数据响应式
     function defineReactive(obj,key,val){
         Object.defineProperty(obj,key,{
             get(){
                 console.log('get',key);
                 return val;//不返回的话，外部引用不到
             },
             set(newVal){
                if(newVal !== val){
                    console.log('set',key,newVal)
                    val = newVal;
                    update();
                }
             }
         })
     }


     //形参value--> return val,值变了,再修改val（闭包思想，每个响应式都是独立的，拥有局部作用域并且暴露给外部使用，内部变量可以保存）
     //get函数往外暴露属性
     //从响应式看闭包：拦截属性，获取并触发对应的更新方法，ｓｅｔ相应，更新属性


    const obj = {};
    defineReactive(obj,'foo','111');

    function update(){
        app.innerText = obj.foo;
    }

    setInterval(()=>{
        obj.foo = new Date().toLocaleTimeString();
    },1000);
</script>
</html>
